{% extends 'base.html' %}

{% block title %}
인기 동영상 랭킹
{% endblock %}

{% block content %}
<div class="ranking_title">
    <h3> 오늘의 인기 동영상 랭킹 TOP 50 </h3>
</div>

<div class="ranking_analysis">
<div>
<select  class="form-select" aria-label="Default select example" onchange="location = this.value;">
    <option selected>인기 동영상 분석</option>
    <option value="/ranking/category">카테고리별 분석</option>
    <option value="/ranking/channel">채널별 분석</option>
</select>
</div>
</div>

<div id="chart">
<canvas id="myChart1"></canvas>
    <script>
        var ctx = document.getElementById('myChart1').getContext('2d');
        var mychart1 = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: {{ category | safe }},
                datasets: [{
                    label: '카테고리',
                    data: {{ category_rate | safe }},
                    borderColor: "rgb(75, 192, 192)"}]
            }
        });
    </script>
</div>

<div class="category_table">
<table id="table" class="table table-hover">
  <thead>
    <tr>
        <th scope="col"></th>
        {% for col in category_channel.columns %}
            <th scope="col">{{col}}</th>
        {% endfor %}
    </tr>
  </thead>

  <tbody>
        {% for i in category_channel.index %}        <! -- for tag start -->
        <tr>
            <th>{{ i }}</th>
            <td>{{ category_channel['카테고리'][i] }}</td>
            <td>{{ category_channel['채널명'][i] }}</td>
            <td>{{ category_channel['조회수'][i] }}</td>
            <td>{{ category_channel['좋아요수'][i] }}</td>
            <td>{{ category_channel['싫어요수'][i] }}</td>
            <td>{{ category_channel['댓글수'][i] }}</td>
        </tr>
        {% endfor %}                          <! -- for tag end -->
  </tbody>
</table>
</div>
{% endblock %}


{% block scripts %}
  <script>
    $(document).ready(function () {
      $('#table').DataTable({
        columns: [
          {orderable: false, searchable: false},
          null,
          null,
          null,
          null,
          null,
          null],
      });
    });
  </script>
{% endblock %}